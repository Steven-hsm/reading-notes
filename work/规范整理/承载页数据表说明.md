# 1. 承载页数据统计说明

## 1. 1 专有名词解释

承载页

>  小程序页面的停留页

## 1. 2 基础访问数据表

###  用户跟踪记录(user_record)

| 字段名称        | 类型    | 长度 | 默认值 | 外键值 | 是否可为空 | 说明             |
| --------------- | ------- | ---- | ------ | ------ | ---------- | ---------------- |
| userRecordId    | int     | 11   |        |        | 否         | 主键id           |
| wuId            | int     | 11   | 0      |        | 否         | 用户id           |
| wxUnionId       | int     | 11   | 0      |        | 否         | 用户联合id       |
| trackIdStr      | varchar | 64   |        |        | 否         | 跟踪码(会话码)   |
| qrCode          | varchar | 64   |        |        | 是         | 渠道跟踪链接编码 |
| sessionStr      | varchar | 64   |        |        | 否         | 子会话码         |
| parentTopicType | varchar | 64   |        |        | 是         | 父级枚举         |
| parentTopicId   | int     | 11   | 0      |        | 是         | 父级Id           |
| topicType       | varchar | 64   |        |        | 否         | 当前枚举         |
| topicId         | int     | 11   | 0      |        | 否         | 当前Id           |
| channelType     | varchar | 64   |        |        | 是         | 访问的类型       |
| ctime           | bigInt  | 13   | 0      |        | 否         | 访问时间         |

> 用户跟踪记录表
>
>  1. 用于记录用于每次点击进入承载页的数据.数据由小程序统计并发送相关mq进行后续数据处理
>  2. 记录每个页面的访问记录
>  3. 记录页面之间的相互跳转,通过父级枚举和父级id产生链路关系,追踪用户的访问 行为

## 1.3 承载页访问分享数据统计表

### 承载统计表（data_load_bear）

| 字段名称        | 类型    | 长度 | 默认值 | 外键值         | 是否可为空 | 说明             |
| --------------- | ------- | ---- | ------ | -------------- | ---------- | ---------------- |
| dataId          | int     | 11   |        |                | 否         | 主键id           |
| cdate           | int     | 8    | 0      |                | 否         | 统计日期         |
| qrCode          | varchar | 64   |        |                | 是         | 渠道跟踪链接编码 |
| parentDataId    | int     | 11   | 0      | data_load_bear | 是         | 上级承载id       |
| parentTopicType | varchar | 64   |        |                | 是         | 上级枚举         |
| parentTopicId   | varchar | 64   | 0      |                | 否         | 上级id           |
| topicType       | varchar | 64   |        |                | 是         | 当前枚举         |
| topicId         | int     | 11   | 0      |                | 否         | 当前Id           |
| visitCnt        | int     | 11   | 0      |                | 否         | 访问次数         |
| visitPeopleCnt  | int     | 11   | 0      |                | 否         | 访问人数         |
| shareCnt        | int     | 11   | 0      |                | 否         | 分享次数         |
| sharePeopleCnt  | int     | 11   | 0      |                | 否         | 分享人数         |
| ctime           | bigInt  | 13   | 0      |                | 否         | 添加时间         |

> 承载统计表:
>  1. 用于统计承载页每日访问和分享相关数据
>  2. 提供主键id给其他数据统计表(下面将要讨论的表),数据统计表根据dataId就可以找到其上层链路.通过链路关系就可以得出用户从 进入小程序到支付的所有访问路径

## 1.4 活动页数据统计表

> 待续....

### 活动页每日数据(**data_load_act_date**) 

| 字段名称        | 类型    | 长度 | 默认值 | 外键值         | 是否可为空 | 说明             |
| --------------- | ------- | ---- | ------ | -------------- | ---------- | ---------------- |
| id              | int     | 11   |        |                | 否         | 主键id           |




## 1.5 营销页数据统计表

> 目前将和活动无直接相关的数据命名为营销数据统计表,待续...

## 1.6 小程序页面

> 通过跟踪链接进入小程序页面的访问数据和分享数据无法直接统计,这里需要另外增加统计,待续...